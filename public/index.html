<!DOCTYPE html>
<html lang="en">
<head>
    <title>Mutual Aid Mid Ohio Network Membership Form</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/uikit.min.css"/>
    <script src="js/uikit.min.js"></script>
    <script src="js/uikit-icons.min.js"></script>
</head>
<body>
<div class="uk-container">
    <div class="uk-row">
        <div class="uk-panel">
            <form class="uk-form-stacked" id="member-form">
                <fieldset class="uk-fieldset" id="member-details">
                    <legend class="uk-legend">Member Details</legend>
                    <p>Provide basic details in this section.</p>
                </fieldset>
                <hr/>
                <fieldset class="uk-fieldset" id="member-needs-and-capabilities">
                    <legend class="uk-legend">Member Needs and Capabilities</legend>
                    <p>In this section, outline both what you can provide and what you need, and we will try to network people's needs to others' capabilities.</p>
                    <div class="uk-row">
                        <p>Needs</p>
                        <hr/>
                        <ul class="uk-grid-small uk-child-width-1-2 uk-child-width-1-4@s uk-text-center" uk-sortable="handle: .uk-card" uk-grid id="needs-grid">
                            <p style="color:#b2bec3;">(No needs added yet!)</p>
                            <!--<li>-->
                                <!--<div class="uk-card uk-card-default uk-card-body">Item 1</div>-->
                            <!--</li>-->
                        </ul>
                        <hr/>
                        <button class="uk-button-primary" uk-toggle="target:#new-need" type="button">+ Add Need</button>

                        <p>Capabalities</p>
                        <hr/>
                        <ul class="uk-grid-small uk-child-width-1-2 uk-child-width-1-4@s uk-text-center" uk-sortable="handle: .uk-card" uk-grid id="capabilities-grid">
                            <p style="color:#b2bec3;">(No capabilities added yet!)</p>
                            <!--<li>-->
                            <!--<div class="uk-card uk-card-default uk-card-body">Item 1</div>-->
                            <!--</li>-->
                        </ul>
                        <hr/>

                        <button class="uk-button-primary" uk-toggle="target:#new-capability" type="button">+ Add Capability</button>


                    </div>
                </fieldset>
                <hr/>
                <fieldset class="uk-fieldset" id="member-resources">
                    <legend class="uk-legend">Member Resources</legend>
                    <p>Provide any resources you would be willing to share to the rest of the network in this section.</p>
                </fieldset>
            </form>
        </div>
    </div>


    <!--Modals-->
    <div id="new-need" uk-modal>
        <div class="uk-modal-dialog uk-modal-body">
            <h2 class="uk-modal-title">New Need</h2>
            <div  id="new-need-body"></div>
            <button class="uk-button-primary" onclick="addNeed()">Add</button>
            <button class="uk-modal-close uk-button-secondary" type="button">Cancel</button>
        </div>
    </div>
    <div id="new-capability" uk-modal>
        <div class="uk-modal-dialog uk-modal-body" >
            <h2 class="uk-modal-title">New Capability</h2>
            <div id="new-capability-body"></div>
            <button class="uk-button-primary" onclick="addCapability()">Add</button>
            <button class="uk-modal-close uk-button-secondary" type="button">Cancel</button>
        </div>
    </div>


    <script>
        //@WARN: This code should only deal with logic of the form. Everything here should be considered PUBLIC.
        const neighborhoodOptions = [

        ];
        const needCategories = [
            "Eldercare",
            "Childcare",
            "Other"
        ];
        const capabilitiesCategories = [

        ];

        let needsCount = 0;
        let capabilitiesCount = 0;
        function createForm() {
            let fullForm = document.getElementById("member-form");
            //Member Details Field
            let detailsForm = document.getElementById("member-details");
            detailsForm.append(createTextField("Name"));
            detailsForm.append(createTextField("Email"));
            detailsForm.append(createTextField("Phone Number"));
            detailsForm.append(createDropdown("Neighborhood",neighborhoodOptions));
            detailsForm.append(createTextField("Zip Code"));
            detailsForm.append(createTextField("Age"));
            detailsForm.append(createExpandableYesNoQuestion("Are you a student?","What School?"));
            //Member capabilities and needs fields and logic
            let needsForm = document.getElementById("member-needs-and-capabilities");

            //Member resources
            let resourcesForm = document.getElementById("member-resources");
            resourcesForm.append(createLongAnswer("What is the question?"));


            //Add Submit Button
            let submit = document.createElement("button");
            submit.classList = "uk-button uk-button-primary";
            submit.innerText = "Submit";
            fullForm.append(submit);

            //Initalize Modals
            let newNeed = document.getElementById("new-need-body");
            newNeed.append(createDropdown("Category",needCategories));
            newNeed.append(createTextField("Please state your need"));
            newNeed.append(createLongAnswer("Please provide details"));

           let newCapability =  document.getElementById("new-capability-body");
            newCapability.append(createDropdown("Category",capabilitiesCategories));
            newCapability.append(createLongAnswer("Please provide details"));

        }

        function createLabel(name){
            let label = document.createElement("label");
            label.classList = "uk-form-label";
            label.setAttribute("for","form-stacked-text");
            label.innerText = name;
            return label;
        }
        function createMarginDiv(){
            let ret = document.createElement("div");
            ret.classList.add("uk-margin");
            return ret;
        }
        function createElementWithClass(elemName, classList){
            let ret = document.createElement(elemName);
            ret.classList = classList;
            return ret;
        }

        function createTextField(name) {
            let ret = createMarginDiv();

            let field = createElementWithClass("input", "uk-input uk-form-controls");
            field.setAttribute("type","text");
            field.setAttribute("placeholder",name);

            ret.append(createLabel(name));
            ret.append(field);
            return ret;
        }

        function createLongAnswer(question){
            let ret = createMarginDiv();

            let answerArea = createElementWithClass("textarea","uk-textarea");

            ret.append(createLabel(question));
            ret.append(answerArea);
            return ret;
        }

        function createDropdown(name, options) {
            let ret = createMarginDiv();
            let select = createElementWithClass("select", "uk-form-controls uk-select");
            options.forEach(elem =>{
                let formOption = document.createElement("option");
                formOption.innerText = elem;
                select.append(formOption);
            });
            ret.append(createLabel(name));
            ret.append(select);
            return ret;
        }

        //When yes is selected, the follow up question will immeditly pop up
        function createExpandableYesNoQuestion(question,followUp){

            let binaryChoice = createMarginDiv();





        }

        function checkValidation(elem, isValid){
            //Clean up state before check
            elem.classList.remove("uk-form-success");
            elem.classList.remove("uk-form-danger");
            //Perform check and assign state
            if(isValid(elem)){
                elem.classList.add("uk-form-success");
            }else{
                elem.classList.add("uk-form-danger");
            }
        }

        createForm();

    </script>
</div>
</body>
</html>
